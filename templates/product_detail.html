{% extends "base.html" %}
{% block content %}
<style>
    .product-detail-container {
        display: flex;
        gap: 32px;
        margin-top: 40px;
    }
    .product-image-container {
        flex: 1;
    }
    .product-image-large {
        width: 100%;
        border-radius: 12px;
        box-shadow: 0 4px 24px rgba(60,72,88,0.10);
    }
    .product-info-container {
        flex: 1;
    }
    .product-details-list {
        list-style: none;
        padding: 0;
        margin-top: 16px;
        border-top: 1px solid #e5e7eb;
        padding-top: 16px;
    }
    .product-details-list li {
        margin-bottom: 8px;
        font-size: 1.05rem;
    }
</style>
<div class="product-detail-container">
    <div class="product-image-container">
        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="https://via.placeholder.com/500x400.png?text={{ variety.name }}" alt="{{ variety.name }}" class="product-image-large lazy">
    </div>
    <div class="product-info-container">
        <h2 style="font-family:'Montserrat',Arial,sans-serif;font-weight:900;color:#232946; margin-top:0;">{{ variety.product }} - {{ variety.name }}</h2>
        <h3 style="color:#16a34a;">
            {% if variety.discount and variety.discount > 0 %}
                <span style="text-decoration:line-through;color:#b91c1c;">Rs.{{ variety.price }}</span>
                <span style="color:#16a34a;font-weight:700;margin-left:8px;">
                    Rs.{{ variety.price - (variety.price * variety.discount // 100) }}
                </span>
                <span style="color:#ff9800;font-size:0.95em;margin-left:6px;">
                    ({{ variety.discount }}% OFF{% if variety.occasion %} - {{ variety.occasion }}{% endif %})
                </span>
            {% else %}
                Rs.{{ variety.price }}
            {% endif %}
        </h3>
        
        <h4 style="margin-top:24px;">Product Details</h4>
        <ul class="product-details-list">
            {% for key, value in variety.details.items() %}
                <li><b>{{ key }}:</b> {{ value }}</li>
            {% endfor %}
        </ul>

        {% if session.user %}
            <a class="add-btn" href="{{ url_for('add_to_cart', pid=variety.id) }}" style="margin-top:24px;display:inline-block;">Add to Cart</a>
        {% endif %}
        <a href="{{ url_for('home') }}" class="back-btn" style="margin-left:16px;">Back to Products</a>
        <button class="add-to-wishlist-btn" data-product-id="{{ variety.id }}" data-product-name="{{ variety.name }}" data-product-price="{{ variety.price - (variety.price * variety.discount // 100) if variety.discount and variety.discount > 0 else variety.price }}" style="background: #ff9900; color: #fff; border: none; padding: 10px 15px; border-radius: 6px; cursor: pointer; font-size: 1rem; margin-left: 16px;">❤️ Add to Wishlist</button>
    </div>
</div>
{% endblock %}